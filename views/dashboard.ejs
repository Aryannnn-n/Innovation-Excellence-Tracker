<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Student Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      function toggleForm() {
        document.getElementById("submissionForm").classList.toggle("hidden");
      }
    </script>
  </head>
  <body class="bg-blue-50 min-h-screen">
    <!-- Floating Navbar -->
    <nav
      class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white w-[90%] max-w-4xl py-3 px-6 shadow-lg rounded-xl flex justify-between items-center"
    >
      <h1 class="text-xl font-bold">Student Dashboard</h1>
      <div>
        <span class="font-semibold"><%= user.name %> (Student)</span>
        <a
          href="/logout"
          class="ml-4 px-4 py-2 bg-red-500 rounded-lg hover:bg-red-600 transition"
        >
          Logout
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg mt-20">
      <h2 class="text-2xl font-bold text-blue-600">
        Welcome, <%= user.name %>!
      </h2>

      <!-- Submit Proposal Button -->
      <button
        onclick="toggleForm()"
        class="mt-4 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition"
      >
        Submit Your Proposal
      </button>

      <!-- Submission Form (Initially Hidden) -->
      <form
        id="submissionForm"
        action="/student/submit"
        method="POST"
        enctype="multipart/form-data"
        class="hidden mt-6 p-4 bg-gray-100 rounded-lg shadow"
      >
        <!-- Title -->
        <label class="block font-semibold">Title:</label>
        <input
          type="text"
          name="title"
          placeholder="Enter a meaningful title"
          required
          class="w-full px-2 py-1 border rounded"
        />

        <!-- Category Dropdown -->
        <label class="block font-semibold mt-2">Category:</label>
        <select
          name="category"
          required
          class="w-full px-2 py-1 border rounded"
        >
          <option value="" disabled selected>Select a category</option>
          <option value="Hackathon">Hackathon</option>
          <option value="Startups">Startups</option>
          <option value="Projects">Projects</option>
          <option value="Patents">Patents</option>
          <option value="Awards">Awards</option>
          <option value="Research">Research</option>
        </select>

        <!-- Description -->
        <label class="block font-semibold mt-2">Description:</label>
        <textarea
          name="description"
          placeholder="Briefly describe your innovation"
          required
          class="w-full px-2 py-1 border rounded"
        ></textarea>

        <!-- Key Features -->
        <label class="block font-semibold mt-2">Key Features:</label>
        <textarea
          name="keyFeatures"
          placeholder="List the key features of your innovation"
          required
          class="w-full px-2 py-1 border rounded"
        ></textarea>

        <!-- Supporting Files Upload -->
        <label class="block font-semibold mt-2"
          >Upload Supporting Files (PDF):</label
        >
        <input
          type="file"
          name="proposalFile"
          accept=".pdf"
          required
          class="w-full px-2 py-1 border rounded"
        />
        <p class="text-sm text-gray-500">
          *Upload your synopsis or proposal as a PDF
        </p>

        <!-- Collaborators -->
        <label class="block font-semibold mt-2">Collaborators:</label>
        <input
          type="text"
          name="collaborators"
          placeholder="List team members (if any)"
          class="w-full px-2 py-1 border rounded"
        />

        <!-- Mentors -->
        <label class="block font-semibold mt-2">Mentor(s):</label>
        <input
          type="text"
          name="mentors"
          placeholder="Enter mentor's name"
          required
          class="w-full px-2 py-1 border rounded"
        />

        <!-- Impact & Future Scope -->
        <label class="block font-semibold mt-2">Impact & Future Scope:</label>
        <textarea
          name="impactFutureScope"
          placeholder="Describe the potential impact and future scope"
          required
          class="w-full px-2 py-1 border rounded"
        ></textarea>

        <!-- Hidden Fields -->
        <input type="hidden" name="studentName" value="<%= user.name %>" />
        <input
          type="hidden"
          name="submissionDate"
          value="<%= new Date().toISOString().slice(0, 10) %>"
        />

        <!-- Submit Button -->
        <button
          type="submit"
          class="mt-4 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition"
        >
          Submit
        </button>
      </form>

      <!-- Submitted Proposals Table -->
      <h2 class="text-xl font-semibold mt-6">Your Submitted Innovations</h2>
      <table class="w-full mt-4 border-collapse border border-gray-300">
  <thead class="bg-blue-200">
    <tr>
      <th class="border border-gray-300 p-2">Title</th>
      <th class="border border-gray-300 p-2">Submission Date</th>
      <th class="border border-gray-300 p-2">Status</th>
    </tr>
  </thead>
  <tbody>
    <% if (innovations.length > 0) { %>
      <% innovations.forEach((innovation) => { %>
        <tr>
          <td class="border border-gray-300 p-2"><%= innovation.title %></td>
          <td class="border border-gray-300 p-2"><%= innovation.submissionDate %></td>
          <td class="border border-gray-300 p-2 text-center">
            <% if (innovation.status === 'Accepted') { %>
              <span class="text-green-600 font-semibold">Accepted</span>
            <% } else { %>
              <span class="text-yellow-600 font-semibold">Pending</span>
            <% } %>
          </td>
        </tr>
      <% }); %>
    <% } else { %>
      <tr>
        <td colspan="3" class="border border-gray-300 p-4 text-center text-gray-500">
          No submissions yet.
        </td>
      </tr>
    <% } %>
  </tbody>
</table>

    </div>
  </body>
</html>
